<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Preprocessor Language &mdash; CS 374 - Operating Systems  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=2e9965fa" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=87e54e7c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/brand.css?v=629ae113" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.svg"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=7a06361e"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="Standard Library" href="../standard-library/" />
    <link rel="prev" title="Statements and Structure" href="../abstract-machine-model/statements-and-structure/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #D73F09" >

          
          
          <a href="../../../" class="icon icon-home">
            CS 374 - Operating Systems
              <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../meta/syllabus/">Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../meta/schedule/">Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../meta/os1_setup/">OS1 Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../meta/style/">Style Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../01/">Operating Systems Fundamentals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01/introduction/">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../01/introduction/overview/">Operating Systems Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/introduction/history-of-unix/">A Brief History of Unix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/introduction/standards/">Standards and Specifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/introduction/linux-dist/">Linux Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/introduction/c-language/">The C Programming Language</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../01/processes/">Processes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../01/processes/virtual-memory/">Virtual Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/processes/system-call-interface/">System Call Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/processes/hierarchy/">Process Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/processes/identity/">Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/processes/file-system-access/">File System Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/processes/inter-process-communication/">Inter-process Communication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../01/filesystem/">File Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../01/filesystem/mounting/">Mounting and Unmounting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/filesystem/structure/">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/filesystem/permissions/">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/filesystem/metadata/">Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/filesystem/fhs/">The Filesystem Hierarchy Standard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/filesystem/additional-concepts/">Additional Concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../01/terminal/">Terminal Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../01/terminal/operating-modes/">Terminal Operating Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/terminal/control-codes/">Control Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../01/utilities/">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01/shell/">The Interactive Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/simple_commands/">Simple Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/quoting/">Quoting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/expansion/">Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/variable_assignment_and_redirection/">Variable Assignment and Redirection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/command_execution/">Command Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/pipelines/">Pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell/background/">Background Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../01/vim/">Software Development in Vim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01/shell_command_language/">The Shell Command Language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell_command_language/noninteractive_shell/">The Non-interactive Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell_command_language/parameters/">Shell Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/parameters/positional_parameters/">Positional Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/parameters/special_parameters/">Special Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell_command_language/control_flow/">Control Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/background/reserved_words_and_operators/">Reserved Words and Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/background/exit_status/">Exit Status</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/background/shell_grammar/">Shell Grammar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/compound_commands/grouping_constructs/">Grouping Constructs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/compound_commands/loops/">Loops</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/compound_commands/conditional_constructs/">Conditional Constructs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/control_flow/function_definition/">Function Definition</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell_command_language/builtins/">Builtins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/builtins/aliases/">Alias Substitution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/builtins/getopts/">Options Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/builtins/file_access_and_creation/">File Access and Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/builtins/parameters_and_options/">Parameters and Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../01/shell_command_language/builtins/signals/">Signal Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../01/shell_command_language/executable_scripts/">Executable Shell Scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../01/assignments/">Assignments</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Introduction to C Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../assignments/">Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../type-system/">Type System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../type-system/integer-types/">Integer Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../type-system/special-integer-types/">Special Integer Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../type-system/floating-types/">Floating Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../type-system/special-types/">Special Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../type-system/derived-types/">Derived Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../object-model/">Object Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../identifiers/">Identifiers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../identifiers/declaration-syntax/">Declaration Syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../identifiers/declaration-syntax/declaration-specifiers/">Declaration Specifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../identifiers/declaration-syntax/declarators/">Declarators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../identifiers/practical-declarations/">Practical Declarations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../identifiers/practical-declarations/functions/">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../identifiers/practical-declarations/objects/">Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../identifiers/practical-declarations/types/">User-Defined Types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../abstract-machine-model/">Abstract Machine Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../abstract-machine-model/statements-and-structure/">Statements and Structure</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Preprocessor Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard-library/">Standard Library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../03/">Data Access and Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03/file-system-concepts/">File System Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../03/file-system-concepts/background/">File System History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../03/file-system-concepts/structure/">File System Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../03/stdio/">The C Standard Input/Output Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../03/stdio/motivation/">Motivation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../03/stdio/access/">File Access and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../03/stdio/io/">Input/Output Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../03/stdio/io/character/">Character i/o</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../03/stdio/io/direct/">Direct i/o</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../03/stdio/io/string/">String i/o</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../03/stdio/io/formatted/">Formatted i/o</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../03/variadic/">Variadic Functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../03/stdio/io/formatted/printf-family/">Formatted Output</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../03/stdio/io/formatted/scanf-family/">Formatted Input</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../03/posix-io/">POSIX I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../03/posix-io/fcntl/">File Control Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../03/posix-io/io/">File I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../03/posix-io/stdio/">Standard I/O Extensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../03/memory-management/">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../03/memory-management/standard-c/">Standard C Allocations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../03/memory-management/posix/">POSIX Allocations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../03/assignments/">Assignments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../04/">Processes</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../05/">Inter-Process Communication</a><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BigShell</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../assignments/bigshell/">Specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../assignments/bigshell/shell_command_language/">BigShell Command Language</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://www.gradescope.com/courses/801266/assignments/4646362/submissions" rel="noopener noreferrer" target="_blank">GradeScope</a></li>
<li class="toctree-l1"><a class="reference external" href="https://classroom.github.com/a/wz3vJVkk" rel="noopener noreferrer" target="_blank">Starter Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../assignments/bigshell-report/">Final Report</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://oregonstate.edu" rel="noopener noreferrer" target="_blank">Oregon State University</a></li>
<li class="toctree-l1"><a class="reference external" href="https://canvas.oregonstate.edu" rel="noopener noreferrer" target="_blank">Canvas</a></li>
<li class="toctree-l1"><a class="reference external" href="https://edstem.org" rel="noopener noreferrer" target="_blank">Ed Discussions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://teams.microsoft.com" rel="noopener noreferrer" target="_blank">Microsoft Teams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../meta/glossary/">Glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../meta/glossary/c/">Glossary of C Language Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../meta/glossary/operating-systems/">Glossary of Operating Systems Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../meta/glossary/computer-science/">Glossary of Computer Science Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../genindex/">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #D73F09" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../">CS 374 - Operating Systems</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../">Introduction to C Programming</a></li>
      <li class="breadcrumb-item active">Preprocessor Language</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../abstract-machine-model/statements-and-structure/" class="btn btn-neutral float-left" title="Statements and Structure" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../standard-library/" class="btn btn-neutral float-right" title="Standard Library" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="preprocessor-language">
<h1>Preprocessor Language<a class="headerlink" href="#preprocessor-language" title="Link to this heading"></a></h1>
<p>The C preprocessor is a wholly separate component of the C programming language which carries out the first six stages of translation. The preprocessor textually operates on a translation unit and performs simple syntactic parsing of a translation unit into tokens such as identifiers, punctuation, numbers, character constants, and string literals. These tokens are processed and the resulting token stream acts as the input of the compiler, itself.</p>
<section id="line-continuation">
<h2>Line Continuation<a class="headerlink" href="#line-continuation" title="Link to this heading"></a></h2>
<p>During translation, the preprocessor first removes any backslash-escaped line endings from the translation unit–any line that ends with a backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) is concatenated with the line immediately following it. This functionality exists for the purpose of breaking long C++-style comments and preprocessor directives, both of which otherwise terminate at the end of a line.</p>
<div class="compound">
<p>For example, the X-macro pattern involves listing a large number of items, which is convenient to break over multiple lines as shown below,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define BIOME_LIST \</span>
<span class="cp">   X(Desert) \</span>
<span class="cp">   X(Tundra) \</span>
<span class="cp">   X(Rainforest) \</span>
<span class="cp">   X(Grassland) \</span>
<span class="cp">   X(Savanna) \</span>
<span class="cp">   X(Taiga) \</span>
<span class="cp">   X(CoralReef) \</span>
<span class="cp">   X(Mountain) \</span>
<span class="cp">   X(Forest) \</span>
<span class="cp">   X(Swamp)</span>
</pre></div>
</div>
</div>
<div class="compound">
<p>When the preprocessor removes backslash-escaped line endings, the above snippet is equivalent to,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define BIOME_LIST X(Desert) X(Tundra) X(Rainforest) X(Grassland) X(Savanna) X(Taiga) X(CoralReef) X(Mountain) X(Forest) X(Swamp)</span>
</pre></div>
</div>
</div>
</section>
<section id="comment-elision">
<h2>Comment Elision<a class="headerlink" href="#comment-elision" title="Link to this heading"></a></h2>
<p>Next, the preprocessor removes any comments and replaces each with a single space. There are two forms of comments, called C-style (<code class="code highlight c c99 docutils literal highlight-c99"><span class="cm">/* ... */</span></code>), and C++-style (<code class="code highlight c c99 docutils literal highlight-c99"><span class="c1">//</span></code>). C-style comments begin with <code class="code highlight c c99 docutils literal highlight-c99"><span class="cm">/*</span></code> and end with the first matching <code class="code highlight c c99 docutils literal highlight-c99"><span class="o">*/</span></code>; these comments may span multiple lines, and do not nest. C++-style comments begin with <code class="code highlight c c99 docutils literal highlight-c99"><span class="c1">//</span></code> and extend to the end of the current line; note that comments are parsed <em>after</em> backslash-escaped line endings are elided.</p>
<p>Finally, the entire translation unit is lexically parsed into tokens–header names, identifiers, preprocessing numbers, character constants, string literals, punctuators, and whitespace.</p>
</section>
<section id="preprocessor-directive-execution-and-macro-replacement">
<h2>Preprocessor Directive Execution and Macro Replacement<a class="headerlink" href="#preprocessor-directive-execution-and-macro-replacement" title="Link to this heading"></a></h2>
<p>Following these initial preprocessing steps, the preprocessor executes all preprocessing directives and expands any recognized macros. Preprocessing directives are used to conditionally process and skip sections of source files, include other source files, and manage macro definitions. A directive is a line beginning with a <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#</span></code> token, followed by any additional tokens on that line, and there are fifteen preprocessor directives, described below,</p>
<div class="syntax-block docutils container">
<div class="syntax-production docutils container">
<div class="syntax-definition docutils container">
<p><span class="syn-nonterm">directive</span>:</p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">if</span></p>
<p><span class="syn-nonterm">constant-expression</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">ifdef</span></p>
<p><span class="syn-nonterm">identifier</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">ifndef</span></p>
<p><span class="syn-nonterm">identifier</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">elif</span></p>
<p><span class="syn-nonterm">constant-expression</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">else</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">endif</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">include</span></p>
<p><span class="syn-term">&lt;</span></p>
<p><span class="syn-nonterm">header-name</span></p>
<p><span class="syn-term">&gt;</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">include</span></p>
<p><span class="syn-term">“</span></p>
<p><span class="syn-nonterm">header-name</span></p>
<p><span class="syn-term">“</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">define</span></p>
<p><span class="syn-nonterm">identifier</span></p>
<p><span class="syn-nonterm">replacement-list</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">define</span></p>
<p><span class="syn-nonterm">identifier</span> <span class="syn-term">(</span></p>
<p>[ <span class="syn-nonterm">param-list</span> ]</p>
<p><span class="syn-term">)</span></p>
<p><span class="syn-nonterm">replacement-list</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">undef</span></p>
<p><span class="syn-nonterm">identifier</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">line</span></p>
<p><span class="syn-nonterm">line-number</span></p>
<p>[ <span class="syn-term">“</span></p>
<p><span class="syn-nonterm">file-name</span></p>
<p><span class="syn-term">“</span> ]</p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">error</span></p>
<p>[ <span class="syn-nonterm">error-message</span> ]</p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
<p><span class="syn-term">pragma</span></p>
<p>[ <span class="syn-nonterm">token</span>… ]</p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">#</span></p>
</div>
</div>
</div>
<p>Conventionally, since preprocessor directives are not part of C source code, the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#</span></code> of a directive is always placed in column 0 of the line it appears on, rather than being indented to match surrounding code.</p>
<section id="conditional-inclusion">
<h3>Conditional Inclusion<a class="headerlink" href="#conditional-inclusion" title="Link to this heading"></a></h3>
<p>The preprocessor supports several directives to conditionally compile portions of the translation unit. These are the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#if</span></code>, <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#ifdef</span></code>, <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#ifndef</span></code>, <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#elif</span></code>, <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#else</span></code>, and <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#endif</span></code> directives.</p>
<div class="compound">
<p>The <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#if</span></code> and <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#elif</span></code> directives check whether their controlling constant expressions evaluate to nonzero. These directive support one special unary operator, <code class="code highlight c c99 docutils literal highlight-c99"><span class="n">defined</span></code>, which may be used in two forms,</p>
<div class="syntax-block docutils container">
<div class="syntax-production docutils container">
<div class="syntax-rule docutils container">
<p><span class="syn-term">defined</span></p>
<p><span class="syn-nonterm">identifier</span></p>
</div>
<div class="syntax-rule docutils container">
<p><span class="syn-term">defined</span></p>
<p><span class="syn-term">(</span></p>
<p><span class="syn-nonterm">identifier</span></p>
<p><span class="syn-term">)</span></p>
</div>
</div>
</div>
<p>which evaluates to 1 if <span class="syn-nonterm">identifier</span> is currently defined as a macro name, and 0 otherwise. The directives <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#ifdef</span></code> and <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#ifndef</span></code> are simply shorthand for <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#if defined</span></code> and <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#if !defined</span></code>.</p>
</div>
<p>Aside from operands to the <code class="code highlight c c99 docutils literal highlight-c99"><span class="n">defined</span></code> operator, any macros are replaced before evaluation of the controlling expressions. If an identifier remains after macro replacement, it is replaced with 0.</p>
<div class="compound">
<p>A set of related conditional directives are evaluated in sequence. If a condition evaluates to false, then the group it controls is skipped. The first group whose control condition evaluates to true is processed; if none evaluate to true, the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#else</span></code> group is processed, if present. For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">print_debug_level</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="cp">#ifndef DEBUG_LEVEL</span>
<span class="w">   </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Debug level not defined&quot;</span><span class="p">);</span>
<span class="cp">#elif DEBUG_LEVEL == 0</span>
<span class="w">   </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Debug level 0: No debugging&quot;</span><span class="p">);</span>
<span class="cp">#elif DEBUG_LEVEL == 1</span>
<span class="w">   </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Debug level 1: Basic debugging&quot;</span><span class="p">);</span>
<span class="cp">#elif DEBUG_LEVEL == 2</span>
<span class="w">   </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Debug level 2: Advanced debugging&quot;</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="w">   </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Unrecognized debug level&quot;</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="compound">
<p>When directives are embedded within a group, a common convention to aid readability is to add a space between the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#</span></code> and the directive name for each level of nesting. Here is an example of this from <code class="file docutils literal notranslate"><span class="pre">limits.h</span></code>,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined __USE_ISOC99 &amp;&amp; defined __GNUC__</span>
<span class="cp"># ifndef LLONG_MIN</span>
<span class="cp">#  define LLONG_MIN       (-LLONG_MAX-1)</span>
<span class="cp"># endif</span>
<span class="cp"># ifndef LLONG_MAX</span>
<span class="cp">#  define LLONG_MAX       __LONG_LONG_MAX__</span>
<span class="cp"># endif</span>
<span class="cp"># ifndef ULLONG_MAX</span>
<span class="cp">#  define ULLONG_MAX      (LLONG_MAX * 2ULL + 1)</span>
<span class="cp"># endif</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</div>
</section>
<section id="source-file-inclusion">
<h3>Source File Inclusion<a class="headerlink" href="#source-file-inclusion" title="Link to this heading"></a></h3>
<p>Other header or source files may be included directly into a translation unit using the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#include</span></code> directive. These directives are processed recursively in included files. The header file of an include directive may either be enclosed in double quotes or angle brackets,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;stdio.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</pre></div>
</div>
<p>Each form searches for the specified file in an implementation-defined manner; if the double-quoted version’s search fails, it falls back to the angle-bracketed version’s search method.</p>
<p>The typical implementation is such that the angle-bracketed version searches a set of system directories for the specified file (typically <code class="file docutils literal notranslate"><span class="pre">/usr/include</span></code> on UNIX systems), while the double-quoted version searches local project directories before falling back to system directories. These directories are configurable at compile-time via preprocessor options. By default, the double-quoted version searches for files relative to the current source file, and is usually used to include headers internal to a particular project. Compilers provide mechanisms for specifying which directories are searched for both types of include statements.</p>
</section>
<section id="macro-replacement">
<h3>Macro Replacement<a class="headerlink" href="#macro-replacement" title="Link to this heading"></a></h3>
<p>Macros perform simple token-replacement on the source file. Macros are defined with the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#define</span></code> directive, and undefined with the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#undef</span></code> directive. Macros that are already defined must first be undefined before they can be redefined. There are two types of macros, called object-like and function-like macros,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define YEAR 2023                  </span><span class="cm">/* Object-like macro */</span>
<span class="cp">#define MAX(a, b) (a &gt; b ? a : b)  </span><span class="cm">/* Function-like macro */</span>
</pre></div>
</div>
<p>When an macro is encountered, it is replaced with its definition. In the above example, an identifier token <code class="code highlight c c99 docutils literal highlight-c99"><span class="n">YEAR</span></code> would be replaced with the preprocessor-number token <code class="code highlight c c99 docutils literal highlight-c99"><span class="mi">2023</span></code>. Notice that this is taking place after lexical parsing of the source file, so something like <code class="code highlight c c99 docutils literal highlight-c99"><span class="kt">T</span><span class="n">HE_YEAR</span></code> would not be replaced with <code class="code highlight c c99 docutils literal highlight-c99"><span class="kt">T</span><span class="n">HE_2023</span></code>.</p>
<p>Function-like macros work similarly, except that they also perform argument substitution. The number of arguments must match the definition previously provided, and each argument undergoes macro replacement before the function-like macro is evaluated. The function-like macro invocation is replaced with its definition, where every instance of a named parameter is replaced with the corresponding argument. In the above example, <code class="code highlight c c99 docutils literal highlight-c99"><span class="n">MAX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span></code> would expand to <code class="code highlight c c99 docutils literal highlight-c99"><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span></code>.</p>
<div class="compound">
<p>Finally, after replacement, the new tokens are parsed and scanned, and then undergo recursive macro replacement. However, at each level of recursion, a previously expanded macro cannot be re-expanded, so infinite loops are not possible. For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define X Y</span>
<span class="cp">#define Y Z</span>
<span class="cp">#define Z X</span>

<span class="n">X</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="n">Z</span>
</pre></div>
</div>
<p>would expand to <code class="code highlight c c99 docutils literal highlight-c99"><span class="n">Z</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="n">Y</span></code>.</p>
</div>
<div class="compound">
<p>Function-like macros also support two special operators called the stringification (<code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#</span></code>) and the token-pasting (<code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">##</span></code>) operators. In the replacement list of a function-like macro, if a <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#</span></code> precedes one of the parameter names, then that parameter will be enclosed in double quotes after replacement; any embedded double quotes will be escaped as necessary,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define STRINGIFY(x) #x</span>

<span class="n">STRINGIFY</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="cm">/* &quot;1&quot; */</span>
<span class="n">STRINGIFY</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="cm">/* &quot;2&quot; */</span>
<span class="n">STRINGIFY</span><span class="p">(</span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span><span class="w"> </span><span class="cm">/* &quot;\&quot;Hello world!\&quot;&quot; */</span>
</pre></div>
</div>
</div>
<div class="compound">
<p>Also within the replacement list of a function-like macro, if a <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">##</span></code> appears <em>between</em> two parameter names, then those parameters are concatenated,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define PASTE(a, b) a ## b</span>
<span class="n">PASTE</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">)</span><span class="w"> </span><span class="cm">/* 123456 */</span>

<span class="cp">#define MY_MSG &quot;Hello!&quot;</span>
<span class="n">PASTE</span><span class="p">(</span><span class="n">MY</span><span class="p">,</span><span class="w"> </span><span class="n">_MSG</span><span class="p">)</span><span class="w"> </span><span class="cm">/* &quot;Hello!&quot; */</span>
</pre></div>
</div>
</div>
</section>
<section id="other-directives">
<h3>Other Directives<a class="headerlink" href="#other-directives" title="Link to this heading"></a></h3>
<p>The <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#line</span></code> directive is used to set the internally tracked source file number, and, optionally, file name. This directive is frequently used when C source code is generated from templates or other meta-programming tools, so that diagnostic messages refer to the appropriate locations in template or code generation program files rather than particular lines in generated code.</p>
<p>The <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#error</span></code> directive causes preprocessing to fail, and emit an optional error message. This directive is frequently used to prevent compilation when certain features are missing or incompatible with the given program.</p>
<p>The <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#pragma</span></code> directive provides support for implementation-defined behavior; typically, the first token in the <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#pragma</span></code> directive is the name of a custom directive supported by a particular compiler. One widely implemented pragma is <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#pragma once</span></code> which is used to prevent a file from being included more than once in a single translation unit, and often appears at the top of header files.</p>
<p>The <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp">#</span></code> directive, with no directive name, is the null directive, and does nothing. Additionally, most implementations of the preprocessor ignore directives that start with numbers, such as <code class="code highlight c c99 docutils literal highlight-c99"><span class="cp"># 123</span></code>; these are call line markers, and are used internally by the compiler to generate debugging information.</p>
</section>
</section>
<section id="final-preprocessing">
<h2>Final Preprocessing<a class="headerlink" href="#final-preprocessing" title="Link to this heading"></a></h2>
<div class="compound">
<p>After all preprocessor directives are processed, and all macro replacement is complete, the preprocessor concatenates adjacent string literals; in other words, <code class="code highlight c c99 docutils literal highlight-c99"><span class="s">&quot;hello&quot;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="s">&quot;world&quot;</span></code> is concatenated to <code class="code highlight c c99 docutils literal highlight-c99"><span class="s">&quot;hello world&quot;</span></code>. This is especially useful when using preprocessor macros to build strings from separate parts,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define AUTHOR Benny Beaver</span>
<span class="cp">#define DATE 2023</span>

<span class="cm">/* &quot;Copyright (c) 2023, Benny Beaver. All rights reserved.&quot; */</span>
<span class="kt">char</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">copyright</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Copyright (c) &quot;</span><span class="w"> </span><span class="n">DATE</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="n">AUTHOR</span><span class="w"> </span><span class="s">&quot;. All rights reserved.&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../abstract-machine-model/statements-and-structure/" class="btn btn-neutral float-left" title="Statements and Structure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../standard-library/" class="btn btn-neutral float-right" title="Standard Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Ryan Gambord &lt;Ryan.Gambord@oregonstate.edu&gt;.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>