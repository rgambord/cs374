<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Options Processing &mdash; CS 374 - Operating Systems  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=2e9965fa" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/brand.css?v=629ae113" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.svg"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../_static/documentation_options.js?v=7a06361e"></script>
        <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../../_static/design-tabs.js?v=f930bc37"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
        <script src="../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex/" />
    <link rel="search" title="Search" href="../../../../../search/" />
    <link rel="next" title="File Access and Creation" href="../file_access_and_creation/" />
    <link rel="prev" title="Alias Substitution" href="../aliases/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #D73F09" >

          
          
          <a href="../../../../../" class="icon icon-home">
            CS 374 - Operating Systems
              <img src="../../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../meta/syllabus/">Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../meta/schedule/">Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../meta/os1_setup/">OS1 Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../meta/style/">Style Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../">Operating Systems Fundamentals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../introduction/">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/overview/">Operating Systems Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/history-of-unix/">A Brief History of Unix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/standards/">Standards and Specifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/linux-dist/">Linux Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../introduction/c-language/">The C Programming Language</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../processes/">Processes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../processes/virtual-memory/">Virtual Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../processes/system-call-interface/">System Call Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../processes/hierarchy/">Process Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../processes/identity/">Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../processes/file-system-access/">File System Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../processes/inter-process-communication/">Inter-process Communication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../filesystem/">File Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../filesystem/mounting/">Mounting and Unmounting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../filesystem/structure/">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../filesystem/permissions/">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../filesystem/metadata/">Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../filesystem/fhs/">The Filesystem Hierarchy Standard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../filesystem/additional-concepts/">Additional Concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../terminal/">Terminal Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../terminal/operating-modes/">Terminal Operating Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../terminal/control-codes/">Control Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../utilities/">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shell/">The Interactive Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/simple_commands/">Simple Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/quoting/">Quoting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/expansion/">Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/variable_assignment_and_redirection/">Variable Assignment and Redirection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/command_execution/">Command Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/pipelines/">Pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../shell/background/">Background Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../vim/">Software Development in Vim</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../">The Shell Command Language</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../noninteractive_shell/">The Non-interactive Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../parameters/">Shell Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../parameters/positional_parameters/">Positional Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../parameters/special_parameters/">Special Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../control_flow/">Control Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/background/reserved_words_and_operators/">Reserved Words and Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/background/exit_status/">Exit Status</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/background/shell_grammar/">Shell Grammar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/compound_commands/grouping_constructs/">Grouping Constructs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/compound_commands/loops/">Loops</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/compound_commands/conditional_constructs/">Conditional Constructs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../control_flow/function_definition/">Function Definition</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../">Builtins</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../aliases/">Alias Substitution</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Options Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../file_access_and_creation/">File Access and Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parameters_and_options/">Parameters and Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../signals/">Signal Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../executable_scripts/">Executable Shell Scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../assignments/">Assignments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../02/">Introduction to C Programming</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/assignments/">Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/overview/">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/type-system/">Type System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/type-system/integer-types/">Integer Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/type-system/special-integer-types/">Special Integer Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/type-system/floating-types/">Floating Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/type-system/special-types/">Special Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/type-system/derived-types/">Derived Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/object-model/">Object Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/identifiers/">Identifiers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/identifiers/declaration-syntax/">Declaration Syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../02/identifiers/declaration-syntax/declaration-specifiers/">Declaration Specifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../02/identifiers/declaration-syntax/declarators/">Declarators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/identifiers/practical-declarations/">Practical Declarations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../02/identifiers/practical-declarations/functions/">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../02/identifiers/practical-declarations/objects/">Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../02/identifiers/practical-declarations/types/">User-Defined Types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/expressions/">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/abstract-machine-model/">Abstract Machine Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../02/abstract-machine-model/statements-and-structure/">Statements and Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/preprocessor-language/">Preprocessor Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02/standard-library/">Standard Library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../03/">Data Access and Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03/file-system-concepts/">File System Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/file-system-concepts/background/">File System History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/file-system-concepts/structure/">File System Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03/stdio/">The C Standard Input/Output Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/stdio/motivation/">Motivation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/stdio/access/">File Access and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/stdio/io/">Input/Output Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../03/stdio/io/character/">Character i/o</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../03/stdio/io/direct/">Direct i/o</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../03/stdio/io/string/">String i/o</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../03/stdio/io/formatted/">Formatted i/o</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../03/variadic/">Variadic Functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../03/stdio/io/formatted/printf-family/">Formatted Output</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../03/stdio/io/formatted/scanf-family/">Formatted Input</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03/posix-io/">POSIX I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/posix-io/fcntl/">File Control Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/posix-io/io/">File I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/posix-io/stdio/">Standard I/O Extensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03/memory-management/">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/memory-management/standard-c/">Standard C Allocations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03/memory-management/posix/">POSIX Allocations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03/assignments/">Assignments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../04/">Processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/what-is-a-process/">What is a Process?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/processes-and-the-file-system/">Processes and the File System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/process-identification/">Process Identification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/process-identification/#the-init-process">The init Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/process-lifecyle/">Process Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/signals/">Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/execution-times/">Execution Times</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04/multiprogramming/">Multiprogramming</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../05/">Inter-Process Communication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../05/signals/">Signals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/signals/sending/">Sending Signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/signals/receiving/">Receiving Signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/signals/async-safety/">Asynchronous Signal Safety</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05/file-system/">File System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/regular-files/">Regular Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/special-files/">Special Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/drivers/">The Role of Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/fifos/">FIFOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/unix-sockets/">UNIX Domain Sockets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/file-descriptors/">Understanding File Descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/file-system/memory-maps/">Memory Mappings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05/networking/">Networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/networking/stream-sockets/">Stream Sockets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/networking/tcp-client/">TCP Client Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05/networking/tcp-server/">TCP Server Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05/assignments/">Assignments</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BigShell</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../assignments/bigshell/">Specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../assignments/bigshell/shell_command_language/">BigShell Command Language</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://www.gradescope.com/courses/801266/assignments/4646362/submissions" rel="noopener noreferrer" target="_blank">GradeScope</a></li>
<li class="toctree-l1"><a class="reference external" href="https://classroom.github.com/a/wz3vJVkk" rel="noopener noreferrer" target="_blank">Starter Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../meta/github_setup/">GitHub/os1 Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../assignments/bigshell-report/">Final Report</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://oregonstate.edu" rel="noopener noreferrer" target="_blank">Oregon State University</a></li>
<li class="toctree-l1"><a class="reference external" href="https://canvas.oregonstate.edu" rel="noopener noreferrer" target="_blank">Canvas</a></li>
<li class="toctree-l1"><a class="reference external" href="https://edstem.org" rel="noopener noreferrer" target="_blank">Ed Discussions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://teams.microsoft.com" rel="noopener noreferrer" target="_blank">Microsoft Teams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../meta/glossary/">Glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../meta/glossary/c/">Glossary of C Language Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../meta/glossary/operating-systems/">Glossary of Operating Systems Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../meta/glossary/computer-science/">Glossary of Computer Science Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../genindex/">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #D73F09" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../">CS 374 - Operating Systems</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../">Operating Systems Fundamentals</a></li>
          <li class="breadcrumb-item"><a href="../../">The Shell Command Language</a></li>
          <li class="breadcrumb-item"><a href="../">Builtins</a></li>
      <li class="breadcrumb-item active">Options Processing</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../aliases/" class="btn btn-neutral float-left" title="Alias Substitution" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../file_access_and_creation/" class="btn btn-neutral float-right" title="File Access and Creation" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="options-processing">
<h1>Options Processing<a class="headerlink" href="#options-processing" title="Link to this heading"></a></h1>
<p>Often shell scripts wish to implement command-line options as part of the shell script. Instead of manually programming an option processor, the shell offers a utility to accomplish this task correctly and portably, called <strong class="program">getopts</strong>.</p>
<p>The <strong class="program">getopts</strong> takes an option string and variable name as its first two arguments, and then a list of arguments,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>getopts optstring name [arg...]
</pre></div>
</div>
<section id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Link to this heading"></a></h2>
<p class="rubric">Option String</p>
<p>The first argument to <strong class="program">getopts</strong> is the option string. The option string is a list of option characters that <strong class="program">getopts</strong> will scan for in the argument list; it takes the form,</p>
<pre class="grammar-def">
   [":"][<em>opt-char</em>[":"]]...
</pre><p>An optional leading colon modifies how <strong class="program">getopts</strong> behaves if it encounters an option not listed in the option string, or if it encounters an option that requires an argument, but that argument is missing. Each option character may optionally be followed by a colon, which indicates that that option requires an argument.</p>
<p>For example, the option string <code class="docutils literal notranslate"><span class="pre">hvi:o:</span></code> causes <strong class="program">getopts</strong> to scan the provided argument list for option flags <code class="docutils literal notranslate"><span class="pre">-a</span></code> and <code class="docutils literal notranslate"><span class="pre">-v</span></code>, and for argument-taking options <code class="docutils literal notranslate"><span class="pre">-i</span></code> and <code class="docutils literal notranslate"><span class="pre">-o</span></code>.</p>
<p class="rubric">Name</p>
<p>The second argument to <strong class="program">getopts</strong> is the name of a variable. When <strong class="program">getopts</strong> recognizes an option from the option string, the named variable is assigned that option character.</p>
<p class="rubric">Remaining Arguments</p>
<p>The remaining positional arguments are those which are to be scanned by <strong class="program">getopts</strong> for options. Typically, these are the positional arguments of a shell script or function, as in, <code class="code highlight shell docutils literal highlight-shell"><span class="nb">getopts</span><span class="w"> </span><span class="s2">&quot;optstring&quot;</span><span class="w"> </span>OPTCHAR<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span></code></p>
</section>
<section id="exit-status">
<h2>Exit Status<a class="headerlink" href="#exit-status" title="Link to this heading"></a></h2>
<p>An exit status of zero is returned when an option is found; otherwise, if the end of options is encountered or an error occurs, a non-zero status is returned.</p>
</section>
<section id="operation">
<h2>Operation<a class="headerlink" href="#operation" title="Link to this heading"></a></h2>
<p><strong class="program">getopts</strong> tracks the index of the next argument to process in the <code class="docutils literal notranslate"><span class="pre">OPTIND</span></code> shell variable; this allows <strong class="program">getopts</strong> to be repeatedly executed in a loop to process option arguments. When the shell is invoked, <code class="docutils literal notranslate"><span class="pre">OPTIND</span></code> is initialized to 1.</p>
<p>When <strong class="program">getopts</strong> encounters an option character, it sets the variable specified by <em>name</em> to that character. If an unknown option is encountered, the variable <em>name</em> is set to &lt;question-mark&gt; (‘?’).</p>
<p>Additionally, if that option takes an argument as specified in the option string with a trailing colon, the variable <code class="docutils literal notranslate"><span class="pre">OPTARG</span></code> is set to the value of that argument. If an argument is missing, then the variable specified by <em>name</em> is set to a ‘?’, <code class="docutils literal notranslate"><span class="pre">OPTARG</span></code> is unset, and a diagnostic message is printed to standard error; <strong class="program">getopt</strong> still returns 0 in this case.</p>
<p class="rubric">Leading Colon in Option String</p>
<p>As mentioned above, the option string may include an optional leading colon as its first character. When this is included, it affects how unknown options and missing arguments are handled and suppresses any diagnostic messages that <strong class="program">getopts</strong> would normally print.</p>
<p>If an unknown option is encountered, the variable specified by <em>name</em> is still set to ‘?’, but <code class="docutils literal notranslate"><span class="pre">OPTARG</span></code> is additionally set to that character so that it may be inspected.</p>
<p>In the event of an option missing a required argument, <strong class="program">getopts</strong> will instead assign the variable specified by <em>name</em> to ‘:’, and set <code class="docutils literal notranslate"><span class="pre">OPTARG</span></code> to the character representing that option, so that it may be inspected.</p>
<p class="rubric">End of Options</p>
<p>If the end of options is encountered, <strong class="program">getopts</strong> returns a non-zero exit status and set <code class="docutils literal notranslate"><span class="pre">OPTIND</span></code> to the index of the first non-option argument; if there are none, it is set to <code class="docutils literal notranslate"><span class="pre">$#</span> <span class="pre">+</span> <span class="pre">1</span></code>. The variable specified by <em>name</em> is set to ‘?’.</p>
<p>Along with reaching the end of its arguments, when <strong class="program">getopts</strong> encounters an argument which does not begin with ‘-’, or which is exactly “–”, it treats this as the end of options (and the beginning of non-option arguments).</p>
<p class="rubric">Multiple Invocations</p>
<p>If <strong class="program">getopts</strong> was used previously, it must be called with exactly the same arguments as before–same option string, variable <em>name</em>, and arguments. To call <strong class="program">getopts</strong> with different arguments, <code class="docutils literal notranslate"><span class="pre">OPTIND</span></code> must first be reset to 1.</p>
<p>Calling <strong class="program">getopts</strong> with different arguments without first resetting <code class="docutils literal notranslate"><span class="pre">OPTIND</span></code>, or changing <code class="docutils literal notranslate"><span class="pre">OPTIND</span></code> to any value besides 1 produces undefined results.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>In general, the leading colon should always be included in the option string, since it provides additional information to the caller and suppresses uncontrollable diagnostic messages for missing arguments.</p>
<p><strong class="program">getopts</strong> is typically called in a <strong>while</strong> loop with a <strong>case</strong> clause based on the value of the option character.</p>
<p>Here is a simple example,</p>
<p class="rubric">options.sh</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>print_usage<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;Usage: %s [-hv] [-i input_file] [-o output_file] ...\n&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span>
<span class="o">}</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>

print_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>print_usage
<span class="w">  </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%s\n&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s1">&#39;-h              Show this help&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s1">&#39;-v              Show version information&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s1">&#39;-i input_file   Set input filename&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s1">&#39;-o output_file  Set output filename&#39;</span>
<span class="o">}</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>

print_version<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%s - version 1.0\n&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span>
<span class="o">}</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="c1"># Process options</span>
<span class="k">while</span><span class="w"> </span><span class="nb">getopts</span><span class="w"> </span><span class="s1">&#39;:hvi:o:&#39;</span><span class="w"> </span>OPTCHR<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="k">do</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$OPTCHR</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">  </span>i<span class="o">)</span><span class="w"> </span><span class="nv">IN_FILE</span><span class="o">=</span><span class="nv">$OPTARG</span><span class="p">;;</span>
<span class="w">  </span>o<span class="o">)</span><span class="w"> </span><span class="nv">OUT_FILE</span><span class="o">=</span><span class="nv">$OPTARG</span><span class="p">;;</span>
<span class="w">  </span>h<span class="o">)</span><span class="w"> </span>print_help
<span class="w">     </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span><span class="p">;;</span>
<span class="w">  </span>v<span class="o">)</span><span class="w"> </span>print_version
<span class="w">     </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span><span class="p">;;</span>
<span class="w">  </span>:<span class="o">)</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%s: option requires an argument --%c\n&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$OPTARG</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">     </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span><span class="p">;;</span>
<span class="w">  </span><span class="se">\?</span><span class="o">)</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%s: illegal option -- %s\n&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$OPTARG</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="w">     </span>print_usage
<span class="w">     </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span><span class="p">;;</span>
<span class="w">  </span><span class="k">esac</span>
<span class="k">done</span>

<span class="c1"># Remove options from positional parameters</span>
<span class="nb">shift</span><span class="w"> </span><span class="k">$((</span><span class="nv">OPTIND</span><span class="o">-</span><span class="m">1</span><span class="k">))</span>

<span class="c1"># If the first non-option is &quot;--&quot;, get rid of it</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;--&quot;</span><span class="o">]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nb">shift</span>
<span class="k">fi</span>

<span class="c1"># Here are the remaining positional parameters</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$#</span><span class="s2">&quot;</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;Remaining arguments: %s\n&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$*</span><span class="s2">&quot;</span>
<span class="k">fi</span>
</pre></div>
</div>
<p class="rubric">Demonstration</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sh<span class="w"> </span>options.sh<span class="w"> </span>-h
<span class="go">Usage: options.sh [-hv] [-i input_file] [-o output_file] ...</span>
<span class="go">-h              Show this help</span>
<span class="go">-v              Show version information</span>
<span class="go">-i input_file   Set input filename</span>
<span class="go">-o output_file  Set output filename</span>
<span class="gp">$ </span>sh<span class="w"> </span>options.sh<span class="w"> </span>-v
<span class="go">options.sh - version 1.0</span>
<span class="gp">$ </span>sh<span class="w"> </span>options.sh<span class="w"> </span>-i<span class="w"> </span>input<span class="w"> </span>-o<span class="w"> </span>output<span class="w"> </span>arg1<span class="w"> </span>arg2
<span class="go">Remaining arguments: arg1 arg2</span>
<span class="gp">$ </span>sh<span class="w"> </span>options.sh<span class="w"> </span>-x
<span class="go">options.sh: illegal option -- x</span>
<span class="gp">$ </span>sh<span class="w"> </span>options.sh<span class="w"> </span>-i
<span class="go">options.sh: option requires an argument -- x</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../aliases/" class="btn btn-neutral float-left" title="Alias Substitution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../file_access_and_creation/" class="btn btn-neutral float-right" title="File Access and Creation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Ryan Gambord &lt;Ryan.Gambord@oregonstate.edu&gt;.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>